HTTP를 언급하기 앞서 네트워크를 논하지 않을 수 없다.  
우선 OSI 7 계층 중 2, 3, 4, 7계층을 요약해 보려고 한다.


OSI 7 계층의 대전제는 상위 계층이 하위 계층의 기능을 포함한다는 것이다.  
다르게 말하면 의존적이라는 뜻이다.  
그리고 굉장히 추상적인 개념이라고 생각되서 장비와 연관해서 정리해 보려고 한다.  
물론 개인적인 생각과 내가 공부한것들의 요약이기 떄문에 틀린 부분이 있을 수 있다.  
그리고 TCP통신을 가정한다.


1. 2계층은 데이터 링크라고 불리운다.  
유통되는 단위는 Frame이다.  
MAC 주소를 이용해 통신을 한다.  
MAC 주소는 이더넷 기반 기기에 할당되어 있는 고유한 ID이다.  
(예시) L2 수준에서는 랜카드(L2 장비)의 식별번호 쯤으로 이해하면 될 것 같다.  
L2 계층을 MAC 주소라고 예시를 드는 이유중 스위치(L2 장비)를 빠트릴 수 없는데,  
L2 스위치라고 하면 MAC주소로 네트워크 회선과 서버 컴퓨터를 연결하는 네트워크 장비이다.  
개인적으로 이 이미지가 와닿았다.  
![img](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbLp0QX%2FbtrodmM342W%2FgJqcxe2KbD0g2PFkw9OIyK%2Fimg.png)  
위의 이미지와 같이 L2 스위치가 생긴 이유는 위 그림과 같이 불필요한 트래픽을 없애기 위함이다.  



2. 3계층은 네트워크 계층이다.  
유통되는 단위는 Packet이다.  
L3 장비로서는 라우터가 있다.  
라우터의 정의는 이렇게 나와있다.  
라우터란 둘 혹은 그 이상의 네트워크와 네트워크 간 데이터 전송을 위해 최적 경로를 설정해주며 데이터를 해당 경로를 따라 한 통신망에서 다른 통신망으로 통신할 수 있도록 도와주는 인터넷 접속 장비이다.  
라우터는 기존 L2장비인 스위치의 단점인 IP주소를 몰라서 외부 네트워크와 연결이 불가능한 단점이 없어진 장비이다.  
그래서 3계층 하면 주요 키워드로 IP 주소 및 패킷이 나온다.  
특히 패킷이라는 단위가 중요한데, 기본적으로 네트워크 통신을 할때의 단위로 보고있는데  
패킷을 이해하기 위해서는 네트워크의 흐름을 알아야 한다.  
기본적으로 서버측과 클라이언트측, 즉 송수신을 하는 process들이 있다고 가정을 해보자.  
기본적으로 TCP에서 소켓을 이용한 데이터 통신은 스트림 이다.  
스트림의 정의는 데이터, 패킷, 비트 등의 일련의 연속성을 갖는 흐름을 의미한다고 나와있다.
-네트워크의 흐름-  
우선 process안에는 기본적으로 개발자가 설정한 메모리 공간인 버퍼가 있다.  
소켓도 버퍼를 가지고 있다. (소켓이란 기본적으로 파일인데 user mode 에서 동작하는 어플리케이션이 운영체제 수준인 kernel mode에 접근 할 수 있도록 kernel mode 프로토콜을 추상화한 인터페이스 이다.)  
-우선 데이터를 process의 버퍼에 담는다.(정확히 말하면 copy이다.)  
-그리고 tcp 통신이기 때문에 segment 단위로 분해가 일어난다.  
-이를 패킷안에 담는다.(이걸 L3 계층에서 한다. 단위가 패킷)  
-랜카드로 내보낸다.(L2에서 하는데 단위가 Frame이 된다.)  
이 동작을 수신하는 쪽에서 역으로 진행한다.  
다만 수신하는 쪽에서는 socket의 버퍼를 계속 채워주고, process쪽에서는 계속 비워내려 할 뿐이다.  
이런 과정을 궂이 해야 하나 싶겠지만 패킷이 없다면 네트워크의 트래픽은 감당할 수 없을 것이다. (2차선의 도로를 4차선에서 다닐법한 크기의 트럭이 차지하는것과 마찬가지다.)  

3. 4계층은 전송 계층이다.  
유통되는 단위는 segment이다.  
4계층은 계층 구조의 네트워크 구성요소와 프로토콜 내에서 송신자와 수신자를 연결하는 통신 서비스를 제공한다.
연결 방식 종류중 TCP, UDP가 있다.  
TCP는 전송 제어 프로토콜로 연결 개념이 있고, UDP는 없다.  
식별자는 port번호이다.(process의 식별자 정도로 이해한다.)  
기본적으로 TCP연결 방식은 client쪽은 소켓을 open하고, TCP에서 개방된 port번호를 소켓에 부여한다.  
server쪽은 연결을 대기 하는 상태이다.(listen)  
당연하게도 연결하기 위해서는 ip주소와 port번호를 알아야 한다.  

4. 7계층은 응용 계층(Application Layer)이다.  
여기서 HTTP를 다루게 될 것 같다.  
HTTP라는 말이 굉장이 추상적으로 들리는데, 7계층 프로토콜중 HTTP라는 프로토콜이 있을 뿐이고, 웹에서는 HTTP프로토콜을 사용할 뿐이다.  
HTTP는 HTML 문서를 전송받으려고 만들어진 통신 프로토콜이다.  
header와 body가 문자열로 작성되어 있기 떄문에 직관적이다.  
HTTP의 응답코드는 https://developer.mozilla.org/ko/docs/Web/HTTP/Status에 나와있고, HTTP 요청이 성공적으로 완료되었는지 알려준다.  
HTTP는 상태가 없다. 각각이 독립적이라는 뜻이다.  
하지만 TCP 연결이기때문에 상태는 존재해야 한다. 이를 위해 클라이언트쪽에서는 쿠키나 세션 로컬스토리지, 서버쪽에서는 DB등으로 상태를 관리한다.  
